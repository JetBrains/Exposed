<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-01-15T14:46:39.93517455"><title>Querying data | Exposed</title><script type="application/json" id="virtual-toc-data">[{"id":"where-expression","level":0,"title":"Working with where expressions","anchor":"#where-expression"},{"id":"basic","level":1,"title":"Basic conditions","anchor":"#basic"},{"id":"logical-conditions","level":1,"title":"Logical conditions","anchor":"#logical-conditions"},{"id":"pattern-matching-conditions","level":1,"title":"Pattern-matching conditions","anchor":"#pattern-matching-conditions"},{"id":"range-conditions","level":1,"title":"Range conditions","anchor":"#range-conditions"},{"id":"collection-conditions","level":1,"title":"Collection conditions","anchor":"#collection-conditions"},{"id":"conditional-where","level":0,"title":"Conditional WHERE","anchor":"#conditional-where"},{"id":"conditional-joins","level":1,"title":"Conditional joins","anchor":"#conditional-joins"},{"id":"aggregate-and-sort","level":0,"title":"Aggregating and sorting data","anchor":"#aggregate-and-sort"},{"id":"count","level":1,"title":"Count","anchor":"#count"},{"id":"order-by","level":1,"title":"Order by","anchor":"#order-by"},{"id":"group-by","level":1,"title":"Group by","anchor":"#group-by"},{"id":"limit-result-sets","level":0,"title":"Limiting result sets","anchor":"#limit-result-sets"},{"id":"alias","level":0,"title":"Mapping fields with alias","anchor":"#alias"},{"id":"custom-select-queries","level":0,"title":"Custom Select Queries","anchor":"#custom-select-queries"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b267/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/exposed-logo.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Querying data | Exposed"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Exposed Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/docs/0.58.0/dsl-querying-data.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Querying data | Exposed"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/docs/0.58.0/dsl-querying-data.html#webpage",
    "url": "writerside-documentation/docs/0.58.0/dsl-querying-data.html",
    "name": "Querying data | Exposed",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/docs/#website",
    "url": "writerside-documentation/docs/",
    "name": "Exposed Help"
}</script><!-- End Schema.org --></head><body data-id="DSL-Querying-data" data-main-title="Querying data" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Deep Dive into DSL"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Exposed 0.58.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="DSL-Querying-data" id="DSL-Querying-data.topic">Querying data</h1><section class="chapter"><h2 id="where-expression" data-toc="where-expression">Working with <code class="code" id="-309fzl_3">where</code> expressions</h2><p id="-309fzl_4">The <code class="code" id="-309fzl_5">where</code> expression is a core component of building queries in Exposed, allowing you to filter data by specifying conditions. A <code class="code" id="-309fzl_6">where</code> expression expects a boolean operator (<code class="code" id="-309fzl_7">Op&lt;Boolean&gt;</code>), which evaluates to either <code class="code" id="-309fzl_8">true</code> or <code class="code" id="-309fzl_9">false</code>.</p><p id="-309fzl_10">We&rsquo;ve categorized the available conditions into the following groups:</p><ul class="list _bullet" id="-309fzl_11"><li class="list__item" id="-309fzl_12"><p><a href="#basic" id="-309fzl_13" data-tooltip="Basic conditions are simple comparisons, such as equality (eq) and inequality (neq).">Basic conditions</a></p></li><li class="list__item" id="-309fzl_14"><p><a href="#logical-conditions" id="-309fzl_15" data-tooltip="Logical conditions are those that use logical operators, such as AND, OR, and NOT.">Logical conditions</a></p></li><li class="list__item" id="-309fzl_16"><p><a href="#pattern-matching-conditions" id="-309fzl_17" data-tooltip="Conditions that allow you to check for a match in a pattern using operators, such as LIKE.">Pattern-matching conditions</a></p></li><li class="list__item" id="-309fzl_18"><p><a href="#range-conditions" id="-309fzl_19" data-tooltip="To check if a value lies within a specified range, use the .between() function.">Range conditions</a></p></li><li class="list__item" id="-309fzl_20"><p><a href="#collection-conditions" id="-309fzl_21" data-tooltip="To check if an expression is equal or not to any element from a list, use the inList or notInList operators.">Collection conditions</a></p></li></ul><section class="chapter"><h3 id="basic" data-toc="basic">Basic conditions</h3><p id="-309fzl_22">Basic conditions are simple comparisons, such as equality (<code class="code" id="-309fzl_23">eq</code>) and inequality (<code class="code" id="-309fzl_24">neq</code>).</p><dl id="-309fzl_25" data-style="title-left" data-title-width="medium"><dt id="eq" data-expandable="false"><code class="code" id="-309fzl_27">eq</code></dt><dd><p> Checks if an expression is equal to some value.</p></dd><dt id="neq" data-expandable="false"><code class="code" id="-309fzl_29">neq</code></dt><dd><p> Checks if an expression is not equal to some value.</p></dd><dt id="isNull" data-expandable="false"><code class="code" id="-309fzl_31">isNull()</code></dt><dd><p> Returns <code class="code" id="-309fzl_32">true</code> if this expression is null, <code class="code" id="-309fzl_33">false</code> otherwise.</p></dd><dt id="isNotNull" data-expandable="false"><code class="code" id="-309fzl_35">isNotNull()</code></dt><dd><p> Returns <code class="code" id="-309fzl_36">false</code> if this expression is null, <code class="code" id="-309fzl_37">true</code> otherwise.</p></dd><dt id="less" data-expandable="false"><code class="code" id="-309fzl_39">less</code></dt><dd><p> Checks if an expression is less than some value.</p></dd><dt id="lessEq" data-expandable="false"><code class="code" id="-309fzl_41">lessEq</code></dt><dd><p> Checks if an expression is less than or equal to some value.</p></dd><dt id="greater" data-expandable="false"><code class="code" id="-309fzl_43">greater</code></dt><dd><p> Checks if an expression is greater than some value.</p></dd><dt id="greaterEq" data-expandable="false"><code class="code" id="-309fzl_45">greaterEq</code></dt><dd><p> Checks if an expression is greater than or equal to some value.</p></dd><dt id="exists" data-expandable="false"><code class="code" id="-309fzl_47">exists</code></dt><dd><p> Checks if a subquery returns at least one row.</p></dd><dt id="notExists" data-expandable="false"><code class="code" id="-309fzl_49">notExists</code></dt><dd><p> Checks if a subquery does not return any row.</p></dd><dt id="isDistinctFrom" data-expandable="false"><code class="code" id="-309fzl_51">isDistinctFrom</code></dt><dd><p> Checks if this expression is not equal to another value, with null treated as a comparable value.</p></dd><dt id="isNotDistinctFrom" data-expandable="false"><code class="code" id="-309fzl_53">isNotDistinctFrom</code></dt><dd><p> Checks if an expression is equal to another value, with null treated as a comparable value.</p></dd></dl></section><section class="chapter"><h3 id="logical-conditions" data-toc="logical-conditions">Logical conditions</h3><p id="-309fzl_54">Logical conditions are those that use logical operators, such as <code class="code" id="-309fzl_55">AND</code>, <code class="code" id="-309fzl_56">OR</code>, and <code class="code" id="-309fzl_57">NOT</code>.</p><dl id="-309fzl_58" data-style="title-top"><dt id="and" data-expandable="false"><code class="code" id="-309fzl_60">and</code></dt><dd><p> Returns the result of performing a logical <code class="code" id="-309fzl_61">and</code> operation between two expressions.</p></dd><dt id="or" data-expandable="false"><code class="code" id="-309fzl_63">or</code></dt><dd><p> Returns the result of performing a logical <code class="code" id="-309fzl_64">or</code> operation between two expressions.</p></dd><dt id="not" data-expandable="false"><code class="code" id="-309fzl_66">not</code></dt><dd><p> Returns the inverse of an expression.</p></dd><dt id="andIfNotNull" data-expandable="false"><code class="code" id="-309fzl_68">andIfNotNull</code></dt><dd><p> Returns the result of performing a logical <code class="code" id="-309fzl_69">and</code> operation between two expressions if the second one is not null.</p></dd><dt id="orIfNotNull" data-expandable="false"><code class="code" id="-309fzl_71">orIfNotNull</code></dt><dd><p> Returns the result of performing a logical <code class="code" id="-309fzl_72">or</code> operation between two expressions if the second is not null.</p></dd><dt id="compoundAnd" data-expandable="false"><code class="code" id="-309fzl_74">compoundAnd()</code></dt><dd><p> Reduces a list to a single expression by performing an <code class="code" id="-309fzl_75">and</code> operation between all the expressions in the list.</p></dd><dt id="compoundOr" data-expandable="false"><code class="code" id="-309fzl_77">compoundOr()</code></dt><dd><p> Reduces a list to a single expression by performing an <code class="code" id="-309fzl_78">or</code> operation between all the expressions in the list.</p></dd></dl></section><section class="chapter"><h3 id="pattern-matching-conditions" data-toc="pattern-matching-conditions">Pattern-matching conditions</h3><p id="-309fzl_79">Conditions that allow you to check for a match in a pattern using operators, such as <code class="code" id="-309fzl_80">LIKE</code>.</p><dl id="-309fzl_81" data-style="title-top"><dt id="like" data-expandable="false"><code class="code" id="-309fzl_83">like</code></dt><dd><p> Checks if an expression matches the specified pattern. </p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val allMoviesLike = StarWarsFilmsTable.selectAll()
            .where { StarWarsFilmsTable.name like &quot;The %&quot; }
</div></dd><dt id="notLike" data-expandable="false"><code class="code" id="-309fzl_86">notLike</code></dt><dd><p> Checks if an expression doesn't match the specified pattern. </p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val allMoviesNotLike = StarWarsFilmsTable.selectAll()
            .where { StarWarsFilmsTable.name notLike &quot;The %&quot; }
</div></dd><dt id="regexp" data-expandable="false"><code class="code" id="-309fzl_89">regexp</code></dt><dd><p> Checks if an expression matches a regular expression. </p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val allMatchingRegex = StarWarsFilmsTable.selectAll()
            .where { StarWarsFilmsTable.name regexp &quot;^The(\\s\\w+){2}\$&quot; }
</div></dd><dt id="match" data-expandable="false"><code class="code" id="-309fzl_92">match</code></dt><dd><p> Checks whether an expression matches a given pattern based on a specific mode. </p><p id="-309fzl_93">Supported only on MySQL and MariaDB.</p></dd></dl></section><section class="chapter"><h3 id="range-conditions" data-toc="range-conditions">Range conditions</h3><p id="-309fzl_94">To check if a value lies within a specified range, use the <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-i-sql-expression-builder/between.html" id="-309fzl_95" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_96">.between()</code></a> function.</p><p id="-309fzl_97">It checks if an expression is between the values from and to. Returns <code class="code" id="-309fzl_98">true</code> if the expression is between the lower and upper range values (inclusive). Date and time values are also supported as arguments.</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val allBetween = StarWarsFilmsTable.selectAll()
            .where { StarWarsFilmsTable.sequelId.between(MOVIE_ORIGINAL_ID, MOVIE_SEQUEL_2_ID) }
</div></section><section class="chapter"><h3 id="collection-conditions" data-toc="collection-conditions">Collection conditions</h3><p id="-309fzl_100">To check if an expression is equal or not to any element from a list, use the <code class="code" id="-309fzl_101">inList</code> or <code class="code" id="-309fzl_102">notInList</code> operators.</p><section class="chapter"><h4 id="collection-condition-lists" data-toc="collection-condition-lists">Using <code class="code" id="-309fzl_104">inList</code> with lists</h4><p id="-309fzl_105">The <code class="code" id="-309fzl_106">inList</code> operator checks if an expression matches any value in a list. In the following example, the query selects all films with <code class="code" id="-309fzl_107">sequelId</code> values of 6 or 4.</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val allInList = StarWarsFilmsTable.selectAll()
            .where { StarWarsFilmsTable.sequelId inList listOf(MOVIE_SEQUEL_2_ID, MOVIE_ORIGINAL_ID) }
</div></section><section class="chapter"><h4 id="collection-condition-pairs-or-triples" data-toc="collection-condition-pairs-or-triples">Using <code class="code" id="-309fzl_110">inList</code> with Pairs or Triples</h4><p id="-309fzl_111">The <code class="code" id="-309fzl_112">inList</code> operator can also handle multiple expressions, such as pairs or triples, to check for equality across multiple columns.</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val topRated = listOf(MOVIE_SEQUEL_ID to &quot;Empire Strikes Back&quot;, MOVIE_ORIGINAL_ID to &quot;A New Hope&quot;)

        val multipleInList = StarWarsFilmsTable.selectAll()
            .where {
                StarWarsFilmsTable.sequelId to StarWarsFilmsTable.name inList topRated
            }
</div></section><section class="chapter"><h4 id="any-all" data-toc="any-all">Using <code class="code" id="-309fzl_115">ANY</code> and <code class="code" id="-309fzl_116">ALL</code></h4><p id="-309fzl_117">In addition to the <code class="code" id="-309fzl_118">IN</code> operator, the <code class="code" id="-309fzl_119">ANY</code> and <code class="code" id="-309fzl_120">ALL</code> operators are available with any preceding comparison operator:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val anyFromArray = StarWarsFilmsTable.selectAll()
            .where {
                StarWarsFilmsTable.sequelId eq anyFrom(arrayOf(MOVIE_SEQUEL_2_ID, MOVIE_ORIGINAL_ID))
            }
</div><p id="-309fzl_122"><a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/any-from.html" id="-309fzl_123" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_124">anyFrom()</code></a> and <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/all-from.html" id="-309fzl_125" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_126">allFrom()</code></a> also accept subqueries, tables, and array expressions as arguments.</p></section></section></section><section class="chapter"><h2 id="conditional-where" data-toc="conditional-where">Conditional <code class="code" id="-309fzl_128">WHERE</code></h2><p id="-309fzl_129">When working with SQL databases, it is a rather common case to have a query with a <code class="code" id="-309fzl_130">WHERE</code> clause that depends on certain conditions. These conditions often come from application logic or user input. Managing such conditions can become complex, especially with independent or nested conditions.</p><p id="-309fzl_131">Imagine a form on a website where a user can optionally filter &quot;Star Wars&quot; films by a director and/or a sequel. To construct such a query, you can use the <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/and-where.html" id="-309fzl_132" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_133">.andWhere()</code></a> function:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">    fun findWithConditionalWhere(directorName: String?, sequelId: Int?) {
        val query = StarWarsFilmsTable.selectAll()

        // Add conditions dynamically
        directorName?.let {
            query.andWhere { StarWarsFilmsTable.director eq it }
        }
        sequelId?.let {
            query.andWhere { StarWarsFilmsTable.sequelId eq it }
        }
    }
</div><p id="-309fzl_135">In the above example, the query starts with <code class="code" id="-309fzl_136">selectAll()</code>, which retrieves all rows from the <code class="code" id="-309fzl_137">StarWarsFilmsTable</code>. Then, the <code class="code" id="-309fzl_138">let</code> function is used to ensure that conditional <code class="code" id="-309fzl_139">WHERE</code> clauses for the <code class="code" id="-309fzl_140">directorName</code> and <code class="code" id="-309fzl_141">sequelId</code> are applied only if values are provided.</p><section class="chapter"><h3 id="conditional-joins" data-toc="conditional-joins">Conditional joins</h3><p id="-309fzl_142">Sometimes, you may need to modify not just the <code class="code" id="-309fzl_143">WHERE</code> clause but also the underlying table joins based on certain conditions. For example, filtering by an actor's name might require joining <code class="code" id="-309fzl_144">ActorsTable</code> conditionally.</p><p id="-309fzl_145">In these cases, you can use the <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-query/adjust-column-set.html" id="-309fzl_146" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_147">.adjustColumnSet()</code></a> and <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-query/adjust-select.html" id="-309fzl_148" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_149">.adjustSelect()</code></a> functions, which allow to extend and modify <code class="code" id="-309fzl_150">JOIN</code> and <code class="code" id="-309fzl_151">SELECT</code> parts of a query:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">    fun findWithConditionalJoin(actorName: String?) {
        transaction {
            val query = StarWarsFilmsTable.selectAll() // Base query

            // Conditionally adjust the query
            actorName?.let { name -&gt;
                query.adjustColumnSet {
                    innerJoin(ActorsTable, { StarWarsFilmsTable.sequelId }, { ActorsTable.sequelId })
                }
                    .adjustSelect {
                        select(StarWarsFilmsTable.columns + ActorsTable.columns)
                    }
                    .andWhere { ActorsTable.name eq name }
            }
        }
    }
</div></section></section><section class="chapter"><h2 id="aggregate-and-sort" data-toc="aggregate-and-sort">Aggregating and sorting data</h2><section class="chapter"><h3 id="count" data-toc="count">Count</h3><p id="-309fzl_153">The <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/count.html" id="-309fzl_154" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_155">.count()</code></a> method is used to determine the number of rows matching a query. It is called on a <code class="code" id="-309fzl_156">Query</code> object and returns the total count of rows.</p><p id="-309fzl_157">The following example counts all rows where <code class="code" id="-309fzl_158">sequelId</code> equals <code class="code" id="-309fzl_159">8</code>:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val count = StarWarsFilmsTable.selectAll()
            .where {
                StarWarsFilmsTable.sequelId eq MOVIE_SEQUEL_3_ID
            }
            .count()
</div></section><section class="chapter"><h3 id="order-by" data-toc="order-by">Order by</h3><p id="-309fzl_161">The <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-abstract-query/order-by.html" id="-309fzl_162" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_163">.orderBy()</code></a> function allows you to sort query results by specifying a list of columns and their sort order (ascending or descending).</p><p id="-309fzl_164">In the following example, <code class="code" id="-309fzl_165">StarWarsFilmsTable.sequelId</code> specifies the column to sort by and <code class="code" id="-309fzl_166">SortOrder.ASC</code> sets the sort order to be ascending:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val sortedFilms = StarWarsFilmsTable.selectAll()
            .orderBy(StarWarsFilmsTable.sequelId to SortOrder.ASC)
</div></section><section class="chapter"><h3 id="group-by" data-toc="group-by">Group by</h3><p id="-309fzl_168">In <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-query/group-by.html" id="-309fzl_169" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_170">.groupBy()</code></a>, define fields and their functions by the <code class="code" id="-309fzl_171">.select()</code> method.</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val groupedFilms = StarWarsFilmsTable
            .select(StarWarsFilmsTable.sequelId.count(), StarWarsFilmsTable.director)
            .groupBy(StarWarsFilmsTable.director)
</div><p id="-309fzl_173">Available field functions are: <code class="code" id="-309fzl_174">.count()</code>, <code class="code" id="-309fzl_175">.sum()</code>, <code class="code" id="-309fzl_176">.average()</code>, <code class="code" id="-309fzl_177">.min()</code> and <code class="code" id="-309fzl_178">.max()</code>.</p></section></section><section class="chapter"><h2 id="limit-result-sets" data-toc="limit-result-sets">Limiting result sets</h2><p id="-309fzl_179">You can use the <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-abstract-query/limit.html" id="-309fzl_180" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_181">.limit()</code></a> function to prevent loading large data sets or to accomplish pagination by using the <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-abstract-query/offset.html" id="-309fzl_182" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_183">.offset()</code></a> function.</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val limitedFilms = StarWarsFilmsTable
            .selectAll()
            .where { StarWarsFilmsTable.sequelId eq ActorsTable.sequelId }
            .limit(2)
            .offset(1)
</div></section><section class="chapter"><h2 id="alias" data-toc="alias">Mapping fields with alias</h2><p id="-309fzl_185">Aliases allow preventing ambiguity between field names and table names. To use the aliased <code class="code" id="-309fzl_186">var</code> instead of the original one, use the <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/alias.html" id="-309fzl_187" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_188">.alias()</code></a> function:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val filmTable1 = StarWarsFilmsTable.alias(&quot;ft1&quot;)

        val allFilms = filmTable1.selectAll() // can be used in joins etc'
</div><p id="-309fzl_190">Aliases also allow you to use the same table in a join multiple times:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val sequelTable = StarWarsFilmsTable.alias(&quot;sql&quot;)

        val originalAndSequelNames = StarWarsFilmsTable
            .join(sequelTable, JoinType.INNER, StarWarsFilmsTable.sequelId, sequelTable[StarWarsFilmsTable.id])
            .select(StarWarsFilmsTable.name, sequelTable[StarWarsFilmsTable.name])
            .map { it[StarWarsFilmsTable.name] to it[sequelTable[StarWarsFilmsTable.name]] }
</div><p id="-309fzl_192">And they can be used when selecting from sub-queries:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val starWarsFilms = StarWarsFilmsTable
            .select(StarWarsFilmsTable.id, StarWarsFilmsTable.name)
            .alias(&quot;swf&quot;)

        val id = starWarsFilms[StarWarsFilmsTable.id]

        val name = starWarsFilms[StarWarsFilmsTable.name]

        val allStarWarsFilms = starWarsFilms
            .select(id, name)
            .map { it[id] to it[name] }
</div></section><section class="chapter"><h2 id="custom-select-queries" data-toc="custom-select-queries">Custom Select Queries</h2><p id="-309fzl_194">A <a href="https://jetbrains.github.io/Exposed/api/exposed-core/org.jetbrains.exposed.v1.sql/-query/index.html" id="-309fzl_195" data-external="true" rel="noopener noreferrer"><code class="code" id="-309fzl_196">Query</code></a> instance, which can be instantiated by calling <code class="code" id="-309fzl_197">.selectAll()</code> or <code class="code" id="-309fzl_198">.select()</code> on a <code class="code" id="-309fzl_199">Table</code> or <code class="code" id="-309fzl_200">Join</code>, has many extension functions for building complex queries. Some of these have already been mentioned above, like <a href="#where-expression" id="-309fzl_201" data-tooltip="The where expression is a core component of building queries in Exposed, allowing you to filter data by specifying conditions. A where expression expects a boolean operator (Op&lt;Boolean&gt;), which evaluates to either true or false.">.where()</a>, <a href="#group-by" id="-309fzl_202" data-tooltip="In .groupBy() , define fields and their functions by the .select() method.">.groupBy()</a>, and <a href="#order-by" id="-309fzl_203" data-tooltip="The .orderBy() function allows you to sort query results by specifying a list of columns and their sort order (ascending or descending).">.orderBy()</a>.</p><p id="-309fzl_204">If a <code class="code" id="-309fzl_205">SELECT</code> query with a special clause is required, a custom extension function can be implemented to enable its use with other standard queries.</p><p id="-309fzl_206">For example, MySQL index hints, which follow the table name in SQL, can be implemented on a <code class="code" id="-309fzl_207">SELECT</code> query by using the following custom function and class:</p><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">import org.jetbrains.exposed.v1.sql.Query
import org.jetbrains.exposed.v1.sql.QueryBuilder
import org.jetbrains.exposed.v1.sql.Table

fun Query.indexHint(hint: String) = IndexHintQuery(this, hint)

class IndexHintQuery(
    val source: Query,
    val indexHint: String
) : Query(source.set, source.where) {

    init {
        // copies any stored properties from the original query
        source.copyTo(this)
    }

    override fun prepareSQL(builder: QueryBuilder): String {
        val originalSql = super.prepareSQL(builder)
        val fromTableSql = &quot; FROM ${transaction.identity(set.source as Table)} &quot;
        return originalSql.replace(fromTableSql, &quot;$fromTableSql$indexHint &quot;)
    }

    override fun copy(): IndexHintQuery = IndexHintQuery(source.copy(), indexHint).also { copy -&gt;
        copyTo(copy)
    }
}</div><div class="code-block" data-lang="kotlin" data-disable-link-processing="true">        val originalQuery = StarWarsFilmsIntIdTable
            .selectAll()
            .withDistinct()
            .where { StarWarsFilmsIntIdTable.sequelId less MOVIE_SEQUEL_ID }
            .groupBy(StarWarsFilmsIntIdTable.id)

        originalQuery.indexHint(&quot;FORCE INDEX (PRIMARY)&quot;)
            .orderBy(StarWarsFilmsIntIdTable.sequelId)
            .forEach { println(it[StarWarsFilmsIntIdTable.name]) }</div></section><div class="last-modified">Last modified: 14 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="working-with-sequence.html" class="navigation-links__prev">Working with Sequence</a><a href="dao-table-types.html" class="navigation-links__next">Table types</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b267/app.js"></script></body></html>
